
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 1 æ¤œè¨¼è©¦é¨“ç®¡ç†</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Sans', sans-serif;
            background: #f5f5f5;
            color: #1a1a1a;
            line-height: 1.6;
            padding-top: 220px;
            letter-spacing: 0.3px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* å›ºå®šãƒ˜ãƒƒãƒ€ãƒ¼ - Diorã‚¹ã‚¿ã‚¤ãƒ« */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #ffffff;
            color: #1a1a1a;
            padding: 25px 40px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            z-index: 1000;
            border-bottom: 2px solid #e0e0e0;
        }

        header h1 { 
            font-size: 22px; 
            margin-bottom: 5px;
            text-align: center;
            font-weight: 400;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        header p {
            font-size: 12px;
            text-align: center;
            color: #666666;
            letter-spacing: 1px;
            font-weight: 300;
        }

        header .subtitle-ja {
            font-size: 10px;
            text-align: center;
            color: #999999;
            margin-top: 5px;
            letter-spacing: 0.5px;
            font-weight: 300;
        }

        /* å›ºå®šãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ - ãƒŸãƒ‹ãƒãƒ« */
        .nav-tabs {
            position: fixed;
            top: 130px;
            left: 0;
            right: 0;
            background: #ffffff;
            display: flex;
            justify-content: center;
            gap: 0;
            box-shadow: 0 2px 6px rgba(0,0,0,0.06);
            z-index: 999;
            overflow-x: auto;
            border-bottom: 2px solid #e0e0e0;
        }

        .nav-tabs::-webkit-scrollbar {
            height: 2px;
        }

        .nav-tabs::-webkit-scrollbar-thumb {
            background: #1a1a1a;
            border-radius: 1px;
        }

        .nav-tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 12px;
            font-weight: 400;
            color: #666666;
            white-space: nowrap;
            transition: all 0.3s ease;
            flex-shrink: 0;
            border-bottom: 2px solid transparent;
            margin-bottom: -1px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }

        .nav-tab:hover {
            color: #1a1a1a;
            background: #f5f5f5;
        }

        .nav-tab.active {
            color: #1a1a1a;
            border-bottom-color: #1a1a1a;
            font-weight: 500;
        }

        h2 { 
            font-size: 20px; 
            margin: 50px 0 30px 0; 
            color: #1a1a1a;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
            scroll-margin-top: 240px;
            font-weight: 400;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }

        h3 {
            font-size: 14px;
            font-weight: 500;
            color: #1a1a1a;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .section {
            background: #ffffff;
            padding: 40px;
            border-radius: 2px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            margin-bottom: 30px;
            scroll-margin-top: 240px;
            border: 2px solid #e0e0e0;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: #fafafa;
            color: #1a1a1a;
            padding: 30px;
            border-radius: 2px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
            border-color: #cccccc;
        }

        .stat-card h3 { 
            font-size: 11px; 
            color: #666666; 
            margin-bottom: 12px;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            font-weight: 400;
        }
        
        .stat-card p { 
            font-size: 36px; 
            font-weight: 300;
            letter-spacing: -1px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .test-info {
            background: #f9f9f9;
            border-left: 3px solid #1a1a1a;
            padding: 15px 20px;
            margin-bottom: 20px;
            border-radius: 2px;
        }

        .test-info-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .test-info-image {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 2px;
            border: 1px solid #e0e0e0;
        }

        .test-icon {
            width: 80px;
            height: 80px;
            background: #1a1a1a;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .test-icon svg {
            width: 50px;
            height: 50px;
            fill: #ffffff;
        }

        .test-info-content {
            flex: 1;
        }

        .test-info-title {
            font-size: 13px;
            font-weight: 500;
            color: #1a1a1a;
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }

        .test-info-description {
            font-size: 12px;
            color: #666666;
            line-height: 1.6;
            margin: 0;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 400;
            color: #1a1a1a;
            font-size: 12px;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        label .label-ja {
            display: block;
            font-size: 9px;
            color: #999999;
            margin-top: 3px;
            letter-spacing: 0.5px;
            text-transform: none;
            font-weight: 300;
        }

        input, select, textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #cccccc;
            border-radius: 2px;
            font-size: 14px;
            transition: all 0.3s ease;
            font-family: inherit;
            background: #fafafa;
            color: #1a1a1a;
        }

        textarea {
            min-height: 120px;
            resize: vertical;
            line-height: 1.8;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #1a1a1a;
            background: #ffffff;
            box-shadow: 0 0 0 3px rgba(0,0,0,0.05);
        }

        button {
            background: #1a1a1a;
            color: #ffffff;
            padding: 14px 32px;
            border: none;
            border-radius: 2px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 400;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }

        button span {
            display: block;
            font-size: 9px;
            margin-top: 3px;
            letter-spacing: 0.5px;
            font-weight: 300;
            text-transform: none;
        }

        button:hover { 
            background: #333333;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        button:active { 
            transform: translateY(0);
        }

        .btn-secondary {
            background: #666666;
            color: #ffffff;
        }

        .btn-secondary:hover {
            background: #555555;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 25px;
        }

        th, td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
            font-size: 13px;
            color: #1a1a1a;
        }

        th {
            background: #fafafa;
            font-weight: 500;
            color: #1a1a1a;
            font-size: 11px;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        tbody tr:hover {
            background: #f5f5f5;
        }

        .success { color: #2d7a3e; font-weight: 500; }
        .error { color: #c41e3a; font-weight: 500; }

        .alert {
            padding: 18px 24px;
            border-radius: 2px;
            margin-bottom: 20px;
            display: none;
            position: fixed;
            top: 240px;
            left: 50%;
            transform: translateX(-50%);
            min-width: 350px;
            z-index: 1001;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border: 1px solid;
            font-size: 13px;
            letter-spacing: 0.5px;
        }

        .alert.success {
            background: #ffffff;
            color: #2d7a3e;
            border-color: #2d7a3e;
        }

        .alert.error {
            background: #ffffff;
            color: #c41e3a;
            border-color: #c41e3a;
        }

        .alert.show { display: block; }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        .form-row-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 25px;
        }

        .divider {
            height: 1px;
            background: #e0e0e0;
            margin: 60px 0;
        }

        /* VASã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ - ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ« */
        input[type="range"] {
            padding: 0;
            height: 3px;
            border: none;
            background: #e0e0e0;
            border-radius: 1px;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: #1a1a1a;
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid #ffffff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: all 0.2s ease;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        input[type="range"]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #1a1a1a;
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid #ffffff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: all 0.2s ease;
        }

        input[type="range"]::-moz-range-thumb:hover {
            transform: scale(1.2);
        }

        .vas-labels {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: #999999;
            margin-top: 8px;
            letter-spacing: 0.5px;
        }

        @media (max-width: 768px) {
            body { padding-top: 200px; }
            .container { padding: 15px; }
            header { padding: 20px; }
            header h1 { font-size: 18px; }
            .nav-tabs { top: 130px; }
            .section { padding: 25px; }
            .form-row, .form-row-3 { grid-template-columns: 1fr; }
            h2 { scroll-margin-top: 220px; }
            .section { scroll-margin-top: 220px; }
            .alert { top: 210px; min-width: 90%; }
        }
        /* æŠ˜ã‚ŠãŸãŸã¿å¼è©³ç´°è§£èª¬ */
        .test-detail-toggle {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            margin-bottom: 15px;
            padding: 6px 0;
            background: transparent;
            border: none;
            border-bottom: 1px solid transparent;
            transition: all 0.3s ease;
        }

        .test-detail-toggle:hover {
            border-bottom: 1px solid #1a1a1a;
        }

        .test-detail-toggle .toggle-icon {
            font-size: 10px;
            color: #1a1a1a;
            transition: transform 0.3s ease;
            font-weight: 300;
        }

        .test-detail-toggle.active .toggle-icon {
            transform: rotate(180deg);
        }

        .test-detail-toggle .toggle-text {
            font-size: 10px;
            color: #666666;
            letter-spacing: 1px;
            text-transform: uppercase;
            font-weight: 300;
        }

        .test-detail-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, opacity 0.4s ease;
            opacity: 0;
        }

        .test-detail-content.active {
            max-height: 1000px;
            opacity: 1;
            margin-bottom: 20px;
        }

        .test-info.collapsible {
            margin-top: 0;
            margin-bottom: 0;
        }

        /* å‰Šé™¤ãƒœã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ« */
        .btn-delete {
            background: #c41e3a;
            color: #ffffff;
            padding: 8px 16px;
            font-size: 11px;
            border: none;
            border-radius: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 1px;
        }

        .btn-delete:hover {
            background: #a01828;
            transform: translateY(-1px);
        }

        .btn-link {
            background: transparent;
            color: #1a1a1a;
            padding: 10px 20px;
            border: 2px solid #1a1a1a;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 1px;
            text-decoration: none;
            display: inline-block;
        }

        .btn-link:hover {
            background: #1a1a1a;
            color: #ffffff;
        }

    </style>
</head>
<body>
    <header>
        <h1>Phase 1 Clinical Trial</h1>
        <p>Mechanoreceptor Stimulation Patch â€” Athletic Performance Study</p>
        <p class="subtitle-ja">Phase 1 æ¤œè¨¼è©¦é¨“ â€” ãƒ¡ã‚«ãƒãƒ¬ã‚»ãƒ—ã‚¿ãƒ¼åˆºæ¿€ãƒ‘ãƒƒãƒãƒ»ã‚¢ã‚¹ãƒªãƒ¼ãƒˆå‘ã‘ç§‘å­¦çš„æ¤œè¨¼</p>
    </header>

    <nav class="nav-tabs">
        <button class="nav-tab active" onclick="scrollToSection('dashboard')">Dashboard<span style="font-size: 9px; display: block; margin-top: 2px; letter-spacing: 0.5px;">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span></button>
        <button class="nav-tab" onclick="scrollToSection('subjects')">Subjects<span style="font-size: 9px; display: block; margin-top: 2px; letter-spacing: 0.5px;">è¢«é¨“è€…ç®¡ç†</span></button>
        <button class="nav-tab" onclick="scrollToSection('measurements')">Measurements<span style="font-size: 9px; display: block; margin-top: 2px; letter-spacing: 0.5px;">æ¸¬å®šãƒ‡ãƒ¼ã‚¿</span></button>
        <button class="nav-tab" onclick="scrollToSection('history')">Analysis<span style="font-size: 9px; display: block; margin-top: 2px; letter-spacing: 0.5px;">å±¥æ­´ãƒ»åˆ†æ</span></button>
        <button class="nav-tab" onclick="scrollToSection('export')">Export<span style="font-size: 9px; display: block; margin-top: 2px; letter-spacing: 0.5px;">ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›</span></button>
    </nav>

    <div class="alert" id="alertBox"></div>

    <div class="container">
        <!-- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ -->
        <div id="dashboard" class="section">
            <h2>Dashboard<span style="font-size: 10px; display: block; margin-top: 5px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span></h2>
            <div class="stats">
                <div class="stat-card">
                    <h3>Registered Subjects<span style="font-size: 8px; display: block; margin-top: 3px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ç™»éŒ²è¢«é¨“è€…æ•°</span></h3>
                    <p id="totalSubjects">0</p>
                </div>
                <div class="stat-card">
                    <h3>Total Measurements<span style="font-size: 8px; display: block; margin-top: 3px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ç·æ¸¬å®šå›æ•°</span></h3>
                    <p id="totalMeasurements">0</p>
                </div>
                <div class="stat-card">
                    <h3>Average Improvement<span style="font-size: 8px; display: block; margin-top: 3px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">å¹³å‡æ”¹å–„ç‡</span></h3>
                    <p id="avgImprovement">â€”</p>
                </div>
            </div>
            
            <div style="margin-top: 40px;">
                <button class="btn-link" onclick="scrollToSection('subjects')">ğŸ“‹ View Registered Subjects<span style="font-size: 9px; display: block; margin-top: 3px; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ç™»éŒ²æ¸ˆã¿è¢«é¨“è€…ä¸€è¦§ã‚’è¦‹ã‚‹</span></button>
            </div>
        </div>

        <div class="divider"></div>

        <!-- è¢«é¨“è€…ç®¡ç† -->
        <div id="subjects" class="section">
            <h2>Subject Management<span style="font-size: 10px; display: block; margin-top: 5px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">è¢«é¨“è€…ç®¡ç†</span></h2>
            
            <h3 style="margin-bottom: 25px;">New Registration<span style="font-size: 9px; display: block; margin-top: 3px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">æ–°è¦ç™»éŒ²</span></h3>
            
            <div class="form-row">
                <div class="form-group">
                    <label>Subject ID *<span class="label-ja">è¢«é¨“è€…ID</span></label>
                    <input type="text" id="subjectId" placeholder="ä¾‹: S001" required>
                </div>
                <div class="form-group">
                    <label>Name *<span class="label-ja">æ°å</span></label>
                    <input type="text" id="subjectName" placeholder="ä¾‹: å±±ç”°å¤ªéƒ" required>
                </div>
            </div>

            <div class="form-row-3">
                <div class="form-group">
                    <label>Date of Birth<span class="label-ja">ç”Ÿå¹´æœˆæ—¥</span></label>
                    <input type="date" id="birthDate">
                </div>
                <div class="form-group">
                    <label>Gender<span class="label-ja">æ€§åˆ¥</span></label>
                    <select id="gender">
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="ç”·æ€§">ç”·æ€§</option>
                        <option value="å¥³æ€§">å¥³æ€§</option>
                        <option value="ãã®ä»–">ãã®ä»–</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Sport<span class="label-ja">ç«¶æŠ€ç¨®ç›®</span></label>
                    <input type="text" id="sport" placeholder="ä¾‹: ã‚µãƒƒã‚«ãƒ¼">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Dominant Hand<span class="label-ja">åˆ©ãæ‰‹</span></label>
                    <select id="dominantHand">
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="å³">å³</option>
                        <option value="å·¦">å·¦</option>
                        <option value="ä¸¡åˆ©ã">ä¸¡åˆ©ã</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Dominant Foot<span class="label-ja">åˆ©ãè¶³</span></label>
                    <select id="dominantFoot">
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="å³">å³</option>
                        <option value="å·¦">å·¦</option>
                        <option value="ä¸¡åˆ©ã">ä¸¡åˆ©ã</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>Sports History<span class="label-ja">ç«¶æŠ€æ­´</span></label>
                <textarea id="sportsHistory" placeholder="ä¾‹: ã‚µãƒƒã‚«ãƒ¼ 15å¹´ï¼ˆå°å­¦æ ¡ã‹ã‚‰ç¾åœ¨ã¾ã§ï¼‰&#10;é«˜æ ¡æ™‚ä»£ã¯çœŒå¤§ä¼šãƒ™ã‚¹ãƒˆ8&#10;ç¾åœ¨ã¯ç¤¾ä¼šäººãƒãƒ¼ãƒ ã§æ´»å‹•ä¸­"></textarea>
            </div>

            <div class="form-group">
                <label>Injury History<span class="label-ja">æ€ªæˆ‘ã®æœ‰ç„¡</span></label>
                <textarea id="injuryHistory" placeholder="ä¾‹: ã‚ã‚Š - å³è†å‰åå­—é­å¸¯æå‚·ï¼ˆ2å¹´å‰ï¼‰&#10;å·¦è¶³é¦–æ»æŒ«ï¼ˆåŠå¹´å‰ï¼‰"></textarea>
            </div>

            <div class="form-group">
                <label>Surgery History<span class="label-ja">æ‰‹è¡“æ­´</span></label>
                <textarea id="surgeryHistory" placeholder="ä¾‹: å³è†å‰åå­—é­å¸¯å†å»ºè¡“ï¼ˆ2å¹´å‰ã€â—‹â—‹ç—…é™¢ï¼‰&#10;ãªã—"></textarea>
            </div>

            <div class="form-group">
                <label>Physical Issues<span class="label-ja">èº«ä½“ã«æŠ±ãˆã¦ã„ã‚‹å•é¡Œ</span></label>
                <textarea id="physicalIssues" placeholder="ä¾‹: å³è†ã®é•å’Œæ„Ÿï¼ˆé‹å‹•å¾Œã«è…«ã‚Œã‚„ã™ã„ï¼‰&#10;è…°ç—›ï¼ˆé•·æ™‚é–“ã®ç·´ç¿’å¾Œï¼‰&#10;å·¦è¶³é¦–ã®å¯å‹•åŸŸåˆ¶é™"></textarea>
            </div>

            <div class="form-group">
                <label>Improvement Goals<span class="label-ja">æ”¹å–„ã—ãŸã„èª²é¡Œ</span></label>
                <textarea id="improvementGoals" placeholder="ä¾‹: ãƒãƒ©ãƒ³ã‚¹èƒ½åŠ›ã®å‘ä¸Š&#10;è†ã®å®‰å®šæ€§æ”¹å–„&#10;ç–¼ç—›ã®è»½æ¸›&#10;ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š"></textarea>
            </div>

            <button onclick="addSubject()">Register Subject<span style="font-size: 9px; display: block; margin-top: 2px; letter-spacing: 0.5px; font-weight: 300;">è¢«é¨“è€…ç™»éŒ²</span></button>

            <h3 style="margin-top: 50px; margin-bottom: 25px;">Registered Subjects<span style="font-size: 9px; display: block; margin-top: 3px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ç™»éŒ²æ¸ˆã¿è¢«é¨“è€…ä¸€è¦§</span></h3>
            <div style="overflow-x: auto;">
                <table>
                    <thead>
                        <tr>
                            <th>ID<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ID</span></th>
                            <th>Name<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">æ°å</span></th>
                            <th>Gender<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">æ€§åˆ¥</span></th>
                            <th>Sport<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ç«¶æŠ€</span></th>
                            <th>Hand<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">åˆ©ãæ‰‹</span></th>
                            <th>Foot<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">åˆ©ãè¶³</span></th>
                            <th>Issues<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">èª²é¡Œ</span></th>
                            <th>Action<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">æ“ä½œ</span></th>
                        </tr>
                    </thead>
                    <tbody id="subjectsTableBody"></tbody>
                </table>
            </div>
        </div>

        <div class="divider"></div>

        <!-- æ¸¬å®šãƒ‡ãƒ¼ã‚¿å…¥åŠ› -->
        <div id="measurements" class="section">
            <h2>Measurement Entry<span style="font-size: 10px; display: block; margin-top: 5px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">æ¸¬å®šãƒ‡ãƒ¼ã‚¿å…¥åŠ›</span></h2>
            <div class="form-group">
                <label>Subject ID *<span class="label-ja">è¢«é¨“è€…ID</span></label>
                <select id="measurementSubjectId" required></select>
            </div>
            <div class="form-group">
                <label>Measurement Date *<span class="label-ja">æ¸¬å®šæ—¥</span></label>
                <input type="date" id="measurementDate" required>
            </div>
            <div class="test-info">
                <div class="test-info-header">
                    <div class="test-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="5" r="2"/>
                            <path d="M12 8c-1 0-2 1-2 2v4h1v6h2v-6h1v-4c0-1-1-2-2-2z"/>
                            <path d="M9 14l-2 5h1l2-4z" opacity="0.5"/>
                        </svg>
                    </div>
                    <div class="test-info-content">
                        <div class="test-info-title">Single Leg Stand Test (ç‰‡è¶³ç«‹ã¡ãƒ†ã‚¹ãƒˆ)</div>
                        <p class="test-info-description">ç‰‡è¶³ã§ç«‹ã¡ã€ãƒãƒ©ãƒ³ã‚¹ã‚’ä¿ã¤æ™‚é–“ã‚’æ¸¬å®šã—ã¾ã™ã€‚åå¯¾å´ã®è¶³ã¯åœ°é¢ã‹ã‚‰é›¢ã—ã€æ‰‹ã¯è…°ã«å½“ã¦ã¾ã™ã€‚ãƒãƒ©ãƒ³ã‚¹èƒ½åŠ›ã¨ä¸‹è‚Œå®‰å®šæ€§ã‚’è©•ä¾¡ã—ã¾ã™ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>Single Leg Stand (sec)<span class="label-ja">ç‰‡è¶³ç«‹ã¡æ™‚é–“</span></label>
                <input type="number" id="singleLegStand" step="0.1" placeholder="ä¾‹: 45.5">
            </div>
            <div class="test-info">
                <div class="test-info-header">
                    <div class="test-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="4" r="2"/>
                            <path d="M12 7v6M12 13l-4 4M12 13l4 4M12 13l0 6" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                            <path d="M8 17l-2 2M16 17l2 2M12 19v2" stroke="white" stroke-width="1" fill="none" opacity="0.5"/>
                        </svg>
                    </div>
                    <div class="test-info-content">
                        <div class="test-info-title">Y-Balance Test (Y-ãƒãƒ©ãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ)</div>
                        <p class="test-info-description">ç‰‡è¶³ç«‹ã¡ã®çŠ¶æ…‹ã§ã€å‰æ–¹ãƒ»å¾Œå¤–å´ãƒ»å¾Œå†…å´ã®3æ–¹å‘ã«ã§ãã‚‹ã ã‘é ãæ‰‹ã‚’ä¼¸ã°ã—ã¾ã™ã€‚å‹•çš„ãƒãƒ©ãƒ³ã‚¹ã€å¯å‹•åŸŸã€ç­‹åŠ›ã‚’ç·åˆçš„ã«è©•ä¾¡ã—ã¾ã™ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>Y-Balance Anterior (cm)<span class="label-ja">Y-ãƒãƒ©ãƒ³ã‚¹å‰æ–¹</span></label>
                <input type="number" id="yBalanceAnt" step="0.1" placeholder="ä¾‹: 85.3">
            </div>
            <div class="form-group">
                <label>Y-Balance Posterolateral (cm)<span class="label-ja">Y-ãƒãƒ©ãƒ³ã‚¹å¾Œå¤–å´</span></label>
                <input type="number" id="yBalancePostLat" step="0.1" placeholder="ä¾‹: 92.1">
            </div>
            <div class="form-group">
                <label>Y-Balance Posteromedial (cm)<span class="label-ja">Y-ãƒãƒ©ãƒ³ã‚¹å¾Œå†…å´</span></label>
                <input type="number" id="yBalancePostMed" step="0.1" placeholder="ä¾‹: 88.7">
            </div>
            <div class="test-info">
                <div class="test-info-header">
                    <div class="test-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="18" cy="6" r="1.5"/>
                            <rect x="6" y="10" width="12" height="3" rx="1"/>
                            <rect x="6" y="10" width="2" height="7" rx="1"/>
                            <rect x="16" y="10" width="2" height="7" rx="1"/>
                        </svg>
                    </div>
                    <div class="test-info-content">
                        <div class="test-info-title">Plank Hold Time (ãƒ—ãƒ©ãƒ³ã‚¯ãƒ†ã‚¹ãƒˆ)</div>
                        <p class="test-info-description">è‚©ã®çœŸä¸‹ã«è‚˜ã‚’ã¤ãã€ã¤ã¾å…ˆã‹ã‚‰é ­ã¾ã§ä¸€ç›´ç·šã‚’ä¿ã¡ã¾ã™ã€‚ä½“å¹¹ã®å®‰å®šæ€§ã¨æŒä¹…åŠ›ã‚’è©•ä¾¡ã—ã¾ã™ã€‚ã§ãã‚‹ã ã‘é•·ãä¿æŒã—ã¾ã™ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>Plank Hold Time (sec)<span class="label-ja">ãƒ—ãƒ©ãƒ³ã‚¯ä¿æŒæ™‚é–“</span></label>
                <input type="number" id="plankTime" step="0.1" placeholder="ä¾‹: 120.0">
            </div>

            <h3 style="margin: 40px 0 25px 0;">Balance Tests<span style="font-size: 9px; display: block; margin-top: 3px; color: #999999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ãƒãƒ©ãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</span></h3>
            <div class="test-info">
                <div class="test-info-content" style="width: 100%;">
                    <p class="test-info-description">ä»¥ä¸‹ã®ãƒãƒ©ãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã§ã€é™çš„ãƒ»å‹•çš„ãªå¹³è¡¡æ„Ÿè¦šã¨å§¿å‹¢åˆ¶å¾¡èƒ½åŠ›ã‚’è©•ä¾¡ã—ã¾ã™ã€‚å„ãƒ†ã‚¹ãƒˆã§ä¸å®‰å®šãªçŠ¶æ…‹ã‚’ä½œã‚Šã€ãƒãƒ©ãƒ³ã‚¹èƒ½åŠ›ã‚’å®¢è¦³çš„ã«æ¸¬å®šã—ã¾ã™ã€‚</p>
                </div>
            </div>
            
            <div class="test-info">
                <div class="test-info-header">
                    <div class="test-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="5" r="2"/>
                            <path d="M12 8c-1 0-2 1-2 2v3h4v-3c0-1-1-2-2-2z"/>
                            <rect x="10" y="13" width="1.5" height="5"/>
                            <rect x="12.5" y="13" width="1.5" height="5"/>
                            <rect x="10" y="18" width="1.5" height="2" opacity="0.7"/>
                            <rect x="12.5" y="19" width="1.5" height="1" opacity="0.7"/>
                        </svg>
                    </div>
                    <div class="test-info-content">
                        <div class="test-info-title">Tandem Stance (ã‚¿ãƒ³ãƒ‡ãƒ ç«‹ä½)</div>
                        <p class="test-info-description">ä¸¡è¶³ã‚’å‰å¾Œã«ä¸€ç›´ç·šã«ä¸¦ã¹ã¦ç«‹ã¡ã¾ã™ã€‚ã‹ã‹ã¨ã¤ã¾å…ˆã‚’æ¥ã—ã€ãƒãƒ©ãƒ³ã‚¹ã‚’ä¿æŒã™ã‚‹æ™‚é–“ã‚’æ¸¬å®šã—ã¾ã™ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>Tandem Stance (sec)<span class="label-ja">ã‚¿ãƒ³ãƒ‡ãƒ ç«‹ä½æ™‚é–“</span></label>
                <input type="number" id="tandemStance" step="0.1" placeholder="ä¾‹: 60.0">
            </div>
            <div class="test-info">
                <div class="test-info-header">
                    <div class="test-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="5" r="2"/>
                            <path d="M12 8c-1 0-2 1-2 2v3h4v-3c0-1-1-2-2-2z"/>
                            <rect x="10.5" y="13" width="3" height="6"/>
                            <path d="M9 10h-2M15 10h2" stroke="white" stroke-width="1.5" fill="none"/>
                            <circle cx="11" cy="5" r="0.5" fill="#666"/>
                            <circle cx="13" cy="5" r="0.5" fill="#666"/>
                        </svg>
                    </div>
                    <div class="test-info-content">
                        <div class="test-info-title">Romberg Test (ãƒ­ãƒ³ãƒ™ãƒ«ã‚°ãƒ†ã‚¹ãƒˆ)</div>
                        <p class="test-info-description">ä¸¡è¶³ã‚’æƒãˆã¦ç›®ã‚’é–‰ã˜ã€ç›´ç«‹å§¿å‹¢ã‚’ä¿ã¡ã¾ã™ã€‚è¦–è¦šæƒ…å ±ãªã—ã§ã®ãƒãƒ©ãƒ³ã‚¹èƒ½åŠ›ã‚’è©•ä¾¡ã—ã¾ã™ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>Romberg Test (sec)<span class="label-ja">ãƒ­ãƒ³ãƒ™ãƒ«ã‚°ãƒ†ã‚¹ãƒˆ</span></label>
                <input type="number" id="rombergTest" step="0.1" placeholder="ä¾‹: 30.0">
            </div>
            <div class="test-info">
                <div class="test-info-header">
                    <div class="test-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="1.5"/>
                            <line x1="12" y1="12" x2="12" y2="6" stroke="white" stroke-width="1.5"/>
                            <line x1="12" y1="12" x2="17" y2="9" stroke="white" stroke-width="1.5"/>
                            <line x1="12" y1="12" x2="18" y2="14" stroke="white" stroke-width="1.5"/>
                            <line x1="12" y1="12" x2="15" y2="18" stroke="white" stroke-width="1.5"/>
                            <line x1="12" y1="12" x2="9" y2="18" stroke="white" stroke-width="1.5"/>
                            <line x1="12" y1="12" x2="6" y2="14" stroke="white" stroke-width="1.5"/>
                            <line x1="12" y1="12" x2="7" y2="9" stroke="white" stroke-width="1.5"/>
                        </svg>
                    </div>
                    <div class="test-info-content">
                        <div class="test-info-title">Star Excursion (ã‚¹ã‚¿ãƒ¼ã‚¨ã‚¯ã‚¹ã‚«ãƒ¼ã‚·ãƒ§ãƒ³)</div>
                        <p class="test-info-description">ç‰‡è¶³ç«‹ã¡ã§ä¸­å¤®ã«ç«‹ã¡ã€8æ–¹å‘ã«ã§ãã‚‹ã ã‘é ãæ‰‹ã‚’ä¼¸ã°ã—ã¾ã™ã€‚å¤šæ–¹å‘ã®å‹•çš„ãƒãƒ©ãƒ³ã‚¹ã‚’è©•ä¾¡ã—ã¾ã™ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>Star Excursion (cm)<span class="label-ja">ã‚¹ã‚¿ãƒ¼åˆ°é”è·é›¢</span></label>
                <input type="number" id="starExcursion" step="0.1" placeholder="ä¾‹: 75.5">
            </div>

            <h3 style="margin: 40px 0 25px 0;">Core & Strength<span style="font-size: 9px; display: block; margin-top: 3px; color: #999999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ä½“å¹¹ãƒ»ç­‹åŠ›ãƒ†ã‚¹ãƒˆ</span></h3>
            <div class="test-info">
                <div class="test-info-header">
                    <div class="test-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="18" cy="8" r="1.5"/>
                            <path d="M6 14h12l-1 4h-10z" transform="rotate(-15 12 14)"/>
                            <rect x="5" y="12" width="2" height="6" transform="rotate(-15 6 15)"/>
                            <rect x="17" y="12" width="2" height="6" transform="rotate(-15 18 15)"/>
                        </svg>
                    </div>
                    <div class="test-info-content">
                        <div class="test-info-title">Side Plank (ã‚µã‚¤ãƒ‰ãƒ—ãƒ©ãƒ³ã‚¯)</div>
                        <p class="test-info-description">æ¨ªå‘ãã«å¯ã¦ã€è‚˜ã¨è¶³ã§ä½“ã‚’æ”¯ãˆã¾ã™ã€‚ä½“å¹¹å´é¢ã®ç­‹åŠ›ã¨å®‰å®šæ€§ã‚’è©•ä¾¡ã—ã€å·¦å³å·®ã‚‚ç¢ºèªã—ã¾ã™ã€‚</p>
                    </div>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label>Side Plank Left (sec)<span class="label-ja">ã‚µã‚¤ãƒ‰ãƒ—ãƒ©ãƒ³ã‚¯å·¦</span></label>
                    <input type="number" id="sidePlankLeft" step="0.1" placeholder="ä¾‹: 45.0">
                </div>
                <div class="form-group">
                    <label>Side Plank Right (sec)<span class="label-ja">ã‚µã‚¤ãƒ‰ãƒ—ãƒ©ãƒ³ã‚¯å³</span></label>
                    <input type="number" id="sidePlankRight" step="0.1" placeholder="ä¾‹: 45.0">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Single Leg Squat Left (reps)<span class="label-ja">ç‰‡è¶³ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆå·¦</span></label>
                    <input type="number" id="singleSquatLeft" step="1" placeholder="ä¾‹: 15">
                </div>
                <div class="form-group">
                    <label>Single Leg Squat Right (reps)<span class="label-ja">ç‰‡è¶³ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆå³</span></label>
                    <input type="number" id="singleSquatRight" step="1" placeholder="ä¾‹: 15">
                </div>
            </div>
            <div class="form-group">
                <label>Push-ups (reps)<span class="label-ja">ãƒ—ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—å›æ•°</span></label>
                <input type="number" id="pushups" step="1" placeholder="ä¾‹: 30">
            </div>

            <h3 style="margin: 40px 0 25px 0;">Flexibility<span style="font-size: 9px; display: block; margin-top: 3px; color: #999999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">æŸ”è»Ÿæ€§ãƒ†ã‚¹ãƒˆ</span></h3>
            <div class="test-info">
                <div class="test-info-content" style="width: 100%;">
                    <p class="test-info-description">é–¢ç¯€ã®å¯å‹•åŸŸã¨ç­‹è‚‰ã®æŸ”è»Ÿæ€§ã‚’è©•ä¾¡ã—ã¾ã™ã€‚æŸ”è»Ÿæ€§ã®ä½ä¸‹ã¯æ€ªæˆ‘ãƒªã‚¹ã‚¯ã‚’é«˜ã‚ã‚‹ãŸã‚ã€å®šæœŸçš„ãªè©•ä¾¡ãŒé‡è¦ã§ã™ã€‚</p>
                </div>
            </div>

                        <div class="test-detail-toggle" onclick="toggleDetail('sitReachDetail')">
                <span class="toggle-icon">â–¼</span>
                <span class="toggle-text">è©³ç´°ã‚’è¦‹ã‚‹</span>
            </div>
            <div id="sitReachDetail" class="test-detail-content">
                <div class="test-info" style="margin-top: 25px; background-color: #fafafa; border-left: 3px solid #1a1a1a;">
                <div class="test-info-content" style="width: 100%;">
                    <div class="test-info-title" style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">ğŸ§˜ Sit and Reach (åº§ä½ä½“å‰å±ˆ)</div>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>ãƒ†ã‚¹ãƒˆæ–¹æ³•:</strong> åºŠã«åº§ã‚Šã€ä¸¡è¶³ã‚’ä¼¸ã°ã—ã¦å‰ã«å‡ºã—ã¾ã™ã€‚è¶³åº•ã‚’ç®±ã¾ãŸã¯å£ã«ã¤ã‘ã¾ã™ã€‚ä¸¡æ‰‹ã‚’é‡ã­ã€è†ã‚’ä¼¸ã°ã—ãŸã¾ã¾ã€ã‚†ã£ãã‚Šã¨å‰å±ˆã—ã¦ã§ãã‚‹ã ã‘é ãã«æ‰‹ã‚’ä¼¸ã°ã—ã¾ã™ã€‚2ç§’ä»¥ä¸Šä¿æŒã—ã€ãã®è·é›¢ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚ã‚¦ã‚©ãƒ¼ãƒŸãƒ³ã‚°ã‚¢ãƒƒãƒ—å¾Œã«å®Ÿæ–½ã—ã¾ã™ã€‚</p>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>è©•ä¾¡ãƒã‚¤ãƒ³ãƒˆ:</strong> ãƒãƒ ã‚¹ãƒˆãƒªãƒ³ã‚°ã‚¹ã€ä¸‹èƒŒéƒ¨ã€è‡€éƒ¨ã®æŸ”è»Ÿæ€§ã‚’è©•ä¾¡ã—ã¾ã™ã€‚è†ãŒæ›²ãŒã‚‰ãªã„ã‚ˆã†æ³¨æ„ã—ã¾ã™ã€‚</p>
                    <p class="test-info-description"><strong>è©•ä¾¡åŸºæº–:</strong><br>
                    ãƒ»å„ªç§€: +15cmä»¥ä¸Šï¼ˆè¶³å…ˆã‚’è¶…ãˆã‚‹ï¼‰<br>
                    ãƒ»è‰¯å¥½: +5cmï½+15cm<br>
                    ãƒ»æ™®é€š: 0cmï½+5cmï¼ˆè¶³å…ˆã«å±Šãï¼‰<br>
                    ãƒ»è¦æ”¹å–„: 0cmæœªæº€ï¼ˆè¶³å…ˆã«å±Šã‹ãªã„ï¼‰<br>
                    ãƒ»<strong>æ³¨æ„:</strong> åå‹•ã‚’ã¤ã‘ãŸã‚Šã€è†ã‚’æ›²ã’ãŸã‚Šã—ãªã„ã§ãã ã•ã„ã€‚é™çš„ãªã‚¹ãƒˆãƒ¬ãƒƒãƒã§æ¸¬å®šã—ã¾ã™ã€‚</p>
                </div>
            </div>
            </div>
            <div class="form-group">
                <label>Sit and Reach (cm)<span class="label-ja">åº§ä½ä½“å‰å±ˆ</span></label>
                <input type="number" id="sitReach" step="0.1" placeholder="ä¾‹: 25.0">
            </div>

                        <div class="test-detail-toggle" onclick="toggleDetail('shoulderFlexDetail')">
                <span class="toggle-icon">â–¼</span>
                <span class="toggle-text">è©³ç´°ã‚’è¦‹ã‚‹</span>
            </div>
            <div id="shoulderFlexDetail" class="test-detail-content">
                <div class="test-info" style="margin-top: 20px; background-color: #fafafa; border-left: 3px solid #1a1a1a;">
                <div class="test-info-content" style="width: 100%;">
                    <div class="test-info-title" style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">ğŸ™Œ Shoulder Flexibility (è‚©é–¢ç¯€å¯å‹•åŸŸ)</div>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>ãƒ†ã‚¹ãƒˆæ–¹æ³•:</strong> ç›´ç«‹å§¿å‹¢ã§ã€ä¸€æ–¹ã®æ‰‹ã‚’ä¸Šã‹ã‚‰èƒŒä¸­ã«å›ã—ã€ã‚‚ã†ä¸€æ–¹ã®æ‰‹ã‚’ä¸‹ã‹ã‚‰èƒŒä¸­ã«å›ã—ã¾ã™ã€‚ä¸¡æ‰‹ã§èƒŒä¸­ã§æ¡æ‰‹ã—ã‚ˆã†ã¨ã—ã¾ã™ã€‚æŒ‡å…ˆãŒã©ã‚Œã ã‘è¿‘ã¥ãã‹ã€ã¾ãŸã¯é‡ãªã‚‹ã‹ã‚’æ¸¬å®šã—ã¾ã™ã€‚å·¦å³ä¸¡æ–¹ã®çµ„ã¿åˆã‚ã›ï¼ˆå³æ‰‹ä¸Šãƒ»å·¦æ‰‹ä¸Šï¼‰ã‚’è©•ä¾¡ã—ã¾ã™ã€‚</p>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>è©•ä¾¡ãƒã‚¤ãƒ³ãƒˆ:</strong> è‚©é–¢ç¯€ã®å†…æ—‹ãƒ»å¤–æ—‹å¯å‹•åŸŸã€è‚©ç”²éª¨ã®å¯å‹•æ€§ã€èƒ¸éƒ¨ã®æŸ”è»Ÿæ€§ã‚’è©•ä¾¡ã—ã¾ã™ã€‚æŠ•çƒç³»ã‚„æ°´æ³³é¸æ‰‹ã«ç‰¹ã«é‡è¦ã§ã™ã€‚</p>
                    <p class="test-info-description"><strong>è©•ä¾¡åŸºæº–:</strong><br>
                    ãƒ»<strong>ä¸¡æ‰‹æ¥è§¦:</strong> æ‰‹ã®ã²ã‚‰ãŒé‡ãªã‚‹ï¼ˆå„ªç§€ï¼‰<br>
                    ãƒ»<strong>æŒ‡å…ˆæ¥è§¦:</strong> æŒ‡å…ˆãŒè§¦ã‚Œã‚‹ï¼ˆè‰¯å¥½ï¼‰<br>
                    ãƒ»<strong>10cmæœªæº€:</strong> æŒ‡å…ˆé–“ã®è·é›¢ãŒ10cmæœªæº€ï¼ˆæ™®é€šï¼‰<br>
                    ãƒ»<strong>10cmä»¥ä¸Š:</strong> æŒ‡å…ˆé–“ã®è·é›¢ãŒ10cmä»¥ä¸Šï¼ˆè¦æ”¹å–„ï¼‰<br>
                    ãƒ»<strong>æ³¨æ„:</strong> å·¦å³ã§å¤§ããªå·®ãŒã‚ã‚‹å ´åˆã¯ã€ã‚¤ãƒ³ãƒ”ãƒ³ã‚¸ãƒ¡ãƒ³ãƒˆã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>
                </div>
            </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Shoulder Flexibility Left<span class="label-ja">è‚©é–¢ç¯€å¯å‹•åŸŸå·¦</span></label>
                    <select id="shoulderFlexLeft">
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="ä¸¡æ‰‹æ¥è§¦">ä¸¡æ‰‹æ¥è§¦</option>
                        <option value="æŒ‡å…ˆæ¥è§¦">æŒ‡å…ˆæ¥è§¦</option>
                        <option value="10cmæœªæº€">10cmæœªæº€</option>
                        <option value="10cmä»¥ä¸Š">10cmä»¥ä¸Š</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Shoulder Flexibility Right<span class="label-ja">è‚©é–¢ç¯€å¯å‹•åŸŸå³</span></label>
                    <select id="shoulderFlexRight">
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="ä¸¡æ‰‹æ¥è§¦">ä¸¡æ‰‹æ¥è§¦</option>
                        <option value="æŒ‡å…ˆæ¥è§¦">æŒ‡å…ˆæ¥è§¦</option>
                        <option value="10cmæœªæº€">10cmæœªæº€</option>
                        <option value="10cmä»¥ä¸Š">10cmä»¥ä¸Š</option>
                    </select>
                </div>
            </div>

                        <div class="test-detail-toggle" onclick="toggleDetail('ankleDorsiDetail')">
                <span class="toggle-icon">â–¼</span>
                <span class="toggle-text">è©³ç´°ã‚’è¦‹ã‚‹</span>
            </div>
            <div id="ankleDorsiDetail" class="test-detail-content">
                <div class="test-info" style="margin-top: 20px; background-color: #fafafa; border-left: 3px solid #1a1a1a;">
                <div class="test-info-content" style="width: 100%;">
                    <div class="test-info-title" style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">ğŸ¦µ Ankle Dorsiflexion (è¶³é–¢ç¯€èƒŒå±ˆ)</div>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>ãƒ†ã‚¹ãƒˆæ–¹æ³•:</strong> è£¸è¶³ã§å£ã«å‘ã‹ã£ã¦ç«‹ã¡ã¾ã™ã€‚æ¸¬å®šã™ã‚‹è¶³ã‚’å‰ã«å‡ºã—ã€ã‹ã‹ã¨ã‚’åºŠã«ã¤ã‘ãŸã¾ã¾è†ã‚’å‰æ–¹ã«æ›²ã’ã¦å£ã«è§¦ã‚Œã•ã›ã¾ã™ã€‚ã‹ã‹ã¨ãŒæµ®ã‹ãªã„æœ€å¤§ã®ä½ç½®ã§ã€ã¤ã¾å…ˆã‹ã‚‰å£ã¾ã§ã®è·é›¢ã‚’æ¸¬å®šã—ã¾ã™ã€‚å·¦å³å„è„š3å›æ¸¬å®šã—ã€æœ€é«˜å€¤ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚</p>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>è©•ä¾¡ãƒã‚¤ãƒ³ãƒˆ:</strong> è¶³é–¢ç¯€ã®èƒŒå±ˆå¯å‹•åŸŸã€ä¸‹è…¿ä¸‰é ­ç­‹ï¼ˆãµãã‚‰ã¯ãï¼‰ã®æŸ”è»Ÿæ€§ã€ã‚¢ã‚­ãƒ¬ã‚¹è…±ã®æŸ”è»Ÿæ€§ã‚’è©•ä¾¡ã—ã¾ã™ã€‚ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆã‚„ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å½±éŸ¿ã—ã¾ã™ã€‚</p>
                    <p class="test-info-description"><strong>è©•ä¾¡åŸºæº–:</strong><br>
                    ãƒ»å„ªç§€: 12cmä»¥ä¸Š<br>
                    ãƒ»è‰¯å¥½: 10-12cm<br>
                    ãƒ»æ™®é€š: 8-10cm<br>
                    ãƒ»è¦æ”¹å–„: 8cmæœªæº€<br>
                    ãƒ»<strong>æ³¨æ„:</strong> ã‹ã‹ã¨ãŒæµ®ã‹ãªã„ã‚ˆã†ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚è¶³é–¢ç¯€ãŒç¡¬ã„ã¨è†ã‚„è…°ã®æ€ªæˆ‘ãƒªã‚¹ã‚¯ãŒé«˜ã¾ã‚Šã¾ã™ã€‚</p>
                </div>
            </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Ankle Dorsiflexion Left (cm)<span class="label-ja">è¶³é–¢ç¯€èƒŒå±ˆå·¦</span></label>
                    <input type="number" id="ankleDorsiLeft" step="0.1" placeholder="ä¾‹: 12.5">
                </div>
                <div class="form-group">
                    <label>Ankle Dorsiflexion Right (cm)<span class="label-ja">è¶³é–¢ç¯€èƒŒå±ˆå³</span></label>
                    <input type="number" id="ankleDorsiRight" step="0.1" placeholder="ä¾‹: 12.5">
                </div>
            </div>

            <h3 style="margin: 40px 0 25px 0;">Power & Agility<span style="font-size: 9px; display: block; margin-top: 3px; color: #999999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ãƒ‘ãƒ¯ãƒ¼ãƒ»æ•æ·æ€§ãƒ†ã‚¹ãƒˆ</span></h3>
            <div class="test-info">
                <div class="test-info-content" style="width: 100%;">
                    <p class="test-info-description">çˆ†ç™ºçš„ãªç­‹åŠ›ç™ºæ®ã¨ã€ç´ æ—©ã„å‹•ãã‚’è©•ä¾¡ã—ã¾ã™ã€‚ã‚¸ãƒ£ãƒ³ãƒ—åŠ›ã‚„ãƒ›ãƒƒãƒ—è·é›¢ã¯ã€ç«¶æŠ€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨ç›´çµã—ã¾ã™ã€‚</p>
                </div>
            </div>

                        <div class="test-detail-toggle" onclick="toggleDetail('verticalJumpDetail')">
                <span class="toggle-icon">â–¼</span>
                <span class="toggle-text">è©³ç´°ã‚’è¦‹ã‚‹</span>
            </div>
            <div id="verticalJumpDetail" class="test-detail-content">
                <div class="test-info" style="margin-top: 25px; background-color: #fafafa; border-left: 3px solid #1a1a1a;">
                <div class="test-info-content" style="width: 100%;">
                    <div class="test-info-title" style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">ğŸš€ Vertical Jump (å‚ç›´è·³ã³)</div>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>ãƒ†ã‚¹ãƒˆæ–¹æ³•:</strong> å£ã®æ¨ªã«ç«‹ã¡ã€ç‰‡æ‰‹ã‚’ä¸Šã’ã¦ç«‹ä½ã®åˆ°é”ç‚¹ã‚’ãƒãƒ¼ã‚¯ã—ã¾ã™ã€‚ä¸¡è¶³ã§ãã®å ´ã§ã‚¸ãƒ£ãƒ³ãƒ—ã—ã€æœ€é«˜åœ°ç‚¹ã§åŒã˜æ‰‹ã§ã‚¿ãƒƒãƒã—ã¾ã™ã€‚ã‚¸ãƒ£ãƒ³ãƒ—å‰ã«åå‹•å‹•ä½œï¼ˆè…¹ã‚’æ›²ã’ã¦è…•ã‚’æŒ¯ã‚‹ï¼‰ã‚’ä½¿ç”¨ã—ã¦æ§‹ã„ã¾ã›ã‚“ã€‚3å›å®Ÿæ–½ã—ã€æœ€é«˜å€¤ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚</p>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>è©•ä¾¡ãƒã‚¤ãƒ³ãƒˆ:</strong> ä¸‹è‚¢ã®çˆ†ç™ºçš„ãƒ‘ãƒ¯ãƒ¼ã€ç¥çµŒç­‹ã®å”èª¿æ€§ã€ä½“å¹¹ã®å®‰å®šæ€§ã‚’è©•ä¾¡ã—ã¾ã™ã€‚ãƒ—ãƒ©ã‚¤ã‚ªãƒ¡ãƒˆãƒªãƒƒã‚¯èƒ½åŠ›ã®æŒ‡æ¨™ã§ã™ã€‚</p>
                    <p class="test-info-description"><strong>å‚è€ƒå€¤:</strong><br>
                    ãƒ»ç”·æ€§ã‚¢ã‚¹ãƒªãƒ¼ãƒˆ: 50-70cmï¼ˆç«¶æŠ€ã«ã‚ˆã‚Šå¤§ããç•°ãªã‚‹ï¼‰<br>
                    ãƒ»å¥³æ€§ã‚¢ã‚¹ãƒªãƒ¼ãƒˆ: 40-55cmï¼ˆç«¶æŠ€ã«ã‚ˆã‚Šå¤§ããç•°ãªã‚‹ï¼‰<br>
                    ãƒ»<strong>æ³¨æ„:</strong> ç€åœ°æ™‚ã®è¡æ’ƒã‚’è»½æ¸›ã™ã‚‹ãŸã‚ã€è†ã‚’æ›²ã’ã¦æŸ”ã‚‰ã‹ãç€åœ°ã—ã¾ã™ã€‚</p>
                </div>
            </div>
            </div>
            <div class="form-group">
                <label>Vertical Jump (cm)<span class="label-ja">å‚ç›´è·³ã³é«˜</span></label>
                <input type="number" id="verticalJump" step="0.1" placeholder="ä¾‹: 55.0">
            </div>

                        <div class="test-detail-toggle" onclick="toggleDetail('singleHopDetail')">
                <span class="toggle-icon">â–¼</span>
                <span class="toggle-text">è©³ç´°ã‚’è¦‹ã‚‹</span>
            </div>
            <div id="singleHopDetail" class="test-detail-content">
                <div class="test-info" style="margin-top: 20px; background-color: #fafafa; border-left: 3px solid #1a1a1a;">
                <div class="test-info-content" style="width: 100%;">
                    <div class="test-info-title" style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">ğŸ¦˜ Single Leg Hop (ç‰‡è¶³ãƒ›ãƒƒãƒ—)</div>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>ãƒ†ã‚¹ãƒˆæ–¹æ³•:</strong> ã‚¹ã‚¿ãƒ¼ãƒˆãƒ©ã‚¤ãƒ³ã«ç‰‡è¶³ã§ç«‹ã¡ã€åŒã˜è¶³ã§ã§ãã‚‹ã ã‘é ãã«å‰æ–¹ã¸ãƒ›ãƒƒãƒ—ã—ã€ç€åœ°åœ°ç‚¹ã§ãƒãƒ©ãƒ³ã‚¹ã‚’ä¿ã¡ã¾ã™ï¼ˆ2ç§’ä»¥ä¸Šï¼‰ã€‚è…°ã«æ‰‹ã‚’ç½®ãã€è¶³ã‚’æŒ¯ã‚Šä¸Šã’ã‚‹å‹•ä½œã¯ä½¿ç”¨ã—ã¾ã›ã‚“ã€‚å·¦å³å„è„š3å›ãšã¤å®Ÿæ–½ã—ã€æœ€é«˜å€¤ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚</p>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>è©•ä¾¡ãƒã‚¤ãƒ³ãƒˆ:</strong> ç‰‡è¶³ã®çˆ†ç™ºåŠ›ã€ç€åœ°æ™‚ã®å®‰å®šæ€§ã€å·¦å³å·®ã‚’è©•ä¾¡ã—ã¾ã™ã€‚å·¦å³ã®å·®ãŒ10%ä»¥ä¸Šã‚ã‚‹å ´åˆã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚</p>
                    <p class="test-info-description"><strong>å‚è€ƒå€¤:</strong><br>
                    ãƒ»ç”·æ€§ã‚¢ã‚¹ãƒªãƒ¼ãƒˆ: 150-180cmï¼ˆç«¶æŠ€ã«ã‚ˆã‚Šç•°ãªã‚‹ï¼‰<br>
                    ãƒ»å¥³æ€§ã‚¢ã‚¹ãƒªãƒ¼ãƒˆ: 120-150cmï¼ˆç«¶æŠ€ã«ã‚ˆã‚Šç•°ãªã‚‹ï¼‰<br>
                    ãƒ»<strong>Limb Symmetry Index (LSI):</strong> (å·¦å³å¯¾ç§°æ€§) = (ä½ã„æ–¹ã®è·é›¢ Ã· é«˜ã„æ–¹ã®è·é›¢) Ã— 100% â†’ 90%ä»¥ä¸ŠãŒæœ›ã¾ã—ã„<br>
                    ãƒ»<strong>æ³¨æ„:</strong> ç€åœ°ãŒä¸å®‰å®šãªå ´åˆã€ãã®è©¦è¡Œã¯ç„¡åŠ¹ã¨ã—ã¾ã™ã€‚</p>
                </div>
            </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Single Leg Hop Left (cm)<span class="label-ja">ç‰‡è¶³ãƒ›ãƒƒãƒ—å·¦</span></label>
                    <input type="number" id="singleHopLeft" step="0.1" placeholder="ä¾‹: 120.0">
                </div>
                <div class="form-group">
                    <label>Single Leg Hop Right (cm)<span class="label-ja">ç‰‡è¶³ãƒ›ãƒƒãƒ—å³</span></label>
                    <input type="number" id="singleHopRight" step="0.1" placeholder="ä¾‹: 120.0">
                </div>
            </div>

                        <div class="test-detail-toggle" onclick="toggleDetail('stepDownDetail')">
                <span class="toggle-icon">â–¼</span>
                <span class="toggle-text">è©³ç´°ã‚’è¦‹ã‚‹</span>
            </div>
            <div id="stepDownDetail" class="test-detail-content">
                <div class="test-info" style="margin-top: 20px; background-color: #fafafa; border-left: 3px solid #1a1a1a;">
                <div class="test-info-content" style="width: 100%;">
                    <div class="test-info-title" style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">ğŸ“¦ Step Down Test (ã‚¹ãƒ†ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ãƒ†ã‚¹ãƒˆ)</div>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>ãƒ†ã‚¹ãƒˆæ–¹æ³•:</strong> 20cmã®å°ã®ä¸Šã«ç‰‡è¶³ã§ç«‹ã¡ã¾ã™ã€‚åå¯¾å´ã®è¶³ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ãªãŒã‚‰ã‚†ã£ãã‚Šã¨åºŠã«å‘ã‹ã£ã¦ä¸‹ã‚ã—ã€ã‹ã‹ã¨ãŒè»½ãåºŠã«è§¦ã‚ŒãŸã‚‰ã™ãã«æˆ»ã—ã¾ã™ã€‚30ç§’é–“ã§ä½•å›ã§ãã‚‹ã‹æ¸¬å®šã—ã¾ã™ã€‚è…°ã«æ‰‹ã‚’ç½®ãã€ä½“å¹¹ã‚’å‚ç›´ã«ä¿ã¡ã¾ã™ã€‚</p>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>è©•ä¾¡ãƒã‚¤ãƒ³ãƒˆ:</strong> æ”¯æŒè„šã®é å¿ƒæ€§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã€è†ã®å®‰å®šæ€§ã€éª¨ç›¤ã®ã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆã‚’è©•ä¾¡ã—ã¾ã™ã€‚è†ãŒå†…å´ã«å€’ã‚Œã‚‹å‹•ãï¼ˆknee valgusï¼‰ã«æ³¨æ„ã—ã¾ã™ã€‚</p>
                    <p class="test-info-description"><strong>å‚è€ƒå€¤:</strong><br>
                    ãƒ»å„ª: 25å›ä»¥ä¸Š/30ç§’<br>
                    ãƒ»è‰¯: 20-24å›/30ç§’<br>
                    ãƒ»å¯: 15-19å›/30ç§’<br>
                    ãƒ»è¦æ”¹å–„: 15å›æœªæº€/30ç§’<br>
                    ãƒ»<strong>æ³¨æ„:</strong> ä¸‹é™æ™‚ã«éª¨ç›¤ãŒå€’ã‚Œã‚‹ã€è†ãŒå†…å´ã«å…¥ã‚‹ã€ä½“ãŒå‰å¾Œã«æºã‚Œã‚‹å ´åˆã¯ã€å‹•ä½œã®è³ªã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚</p>
                </div>
            </div>
            </div>
            <div class="form-group">
                <label>Step Down Test (reps/30s)<span class="label-ja">ã‚¹ãƒ†ãƒƒãƒ—ãƒ€ã‚¦ãƒ³å›æ•°</span></label>
                <input type="number" id="stepDown" step="1" placeholder="ä¾‹: 25">
            </div>

            <h3 style="margin: 40px 0 25px 0;">Functional Movement<span style="font-size: 9px; display: block; margin-top: 3px; color: #999999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">æ©Ÿèƒ½çš„å‹•ä½œè©•ä¾¡</span></h3>
            <div class="test-info">
                <div class="test-info-content" style="width: 100%;">
                    <p class="test-info-description">FMSé¢¨ã®å‹•ä½œã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã§ã€å‹•ä½œã®è³ªã‚’0ï½3ç‚¹ã§è©•ä¾¡ã—ã¾ã™ã€‚0ï¼ç—›ã¿ã€3ï¼å®Œç’§ã€‚å‹•ä½œãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¸å‡è¡¡ã‚„ä»£å„Ÿå‹•ä½œã‚’æ¤œå‡ºã—ã¾ã™ã€‚</p>
                </div>
            </div>

                        <div class="test-detail-toggle" onclick="toggleDetail('deepSquatDetail')">
                <span class="toggle-icon">â–¼</span>
                <span class="toggle-text">è©³ç´°ã‚’è¦‹ã‚‹</span>
            </div>
            <div id="deepSquatDetail" class="test-detail-content">
                <div class="test-info" style="margin-top: 25px; background-color: #fafafa; border-left: 3px solid #1a1a1a;">
                <div class="test-info-content" style="width: 100%;">
                    <div class="test-info-title" style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">ğŸ‹ï¸ Deep Squat (ãƒ‡ã‚£ãƒ¼ãƒ—ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ)</div>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>ãƒ†ã‚¹ãƒˆæ–¹æ³•:</strong> ä¸¡è¶³ã‚’è‚©å¹…ã«é–‹ãã€ã¤ã¾å…ˆã‚’å‰æ–¹ã«å‘ã‘ã¾ã™ã€‚ä¸¡è…•ã‚’é ­ä¸Šã«ä¼¸ã°ã—ã€è‚©ç”²éª¨ã‚’å¯¾ç§°ã«ä¿ã¡ãªãŒã‚‰ã§ãã‚‹ã ã‘æ·±ãã—ã‚ƒãŒã¿ã¾ã™ã€‚</p>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>è©•ä¾¡ãƒã‚¤ãƒ³ãƒˆ:</strong> è‚¡é–¢ç¯€ãƒ»è†ãƒ»è¶³é¦–ã®å¯å‹•åŸŸã€ä¸ŠåŠèº«ã®å®‰å®šæ€§ã€ä½“å¹¹ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’ç·åˆçš„ã«è©•ä¾¡ã—ã¾ã™ã€‚</p>
                    <p class="test-info-description"><strong>æ¡ç‚¹åŸºæº–:</strong><br>
                    ãƒ»<strong>3ç‚¹:</strong> å¤ªã‚‚ã‚‚ãŒåºŠé¢ã¨å¹³è¡Œã€è†ãŒã¤ã¾å…ˆã‚’è¶…ãˆãšã€ä¸ŠåŠèº«ãŒç¸¦æ–¹å‘ã€æ£’ãŒè¶³ã®ä¸Šã«ä¿æŒ<br>
                    ãƒ»<strong>2ç‚¹:</strong> å¤ªã‚‚ã‚‚ãŒåºŠé¢ã¨å¹³è¡Œã€ã‹ã‹ã¨ã§è£œåŠ©ãŒå¿…è¦<br>
                    ãƒ»<strong>1ç‚¹:</strong> å¤ªã‚‚ã‚‚ãŒåºŠé¢ã¨å¹³è¡Œã«ãªã‚‰ãªã„<br>
                    ãƒ»<strong>0ç‚¹:</strong> å‹•ä½œä¸­ã«ç—›ã¿ãŒã‚ã‚‹</p>
                </div>
            </div>

                        <div class="test-detail-toggle" onclick="toggleDetail('inlineLungeDetail')">
                <span class="toggle-icon">â–¼</span>
                <span class="toggle-text">è©³ç´°ã‚’è¦‹ã‚‹</span>
            </div>
            <div id="inlineLungeDetail" class="test-detail-content">
                <div class="test-info" style="margin-top: 20px; background-color: #fafafa; border-left: 3px solid #1a1a1a;">
                <div class="test-info-content" style="width: 100%;">
                    <div class="test-info-title" style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">ğŸ§˜ Inline Lunge (ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒ©ãƒ³ã‚¸)</div>
            </div>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>ãƒ†ã‚¹ãƒˆæ–¹æ³•:</strong> ä¸€ç›´ç·šä¸Šã«å‰å¾Œã®è¶³ã‚’ç½®ã(ã™ã­é•·ã®è·é›¢)ã€ä¸¡è…•ã‚’èƒŒä¸­ã®å¾Œã‚ã§ä¿æŒã—ã€å¾Œã‚ã®è†ãŒåºŠã«è§¦ã‚Œã‚‹ã¾ã§ä½“ã‚’ä¸‹ã’ã¾ã™ã€‚å·¦å³ä¸¡æ–¹ã‚’è©•ä¾¡ã—ã¾ã™ã€‚</p>
                    <p class="test-info-description" style="margin-bottom: 8px;"><strong>è©•ä¾¡ãƒã‚¤ãƒ³ãƒˆ:</strong> å‰å¾Œæ–¹å‘ã®ãƒãƒ©ãƒ³ã‚¹ã€ä½“å¹¹ã®å®‰å®šæ€§ã€è†ã¨è¶³é¦–ã®æŸ”è»Ÿæ€§ã€å·¦å³å·®ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
                    <p class="test-info-description"><strong>æ¡ç‚¹åŸºæº–:</strong><br>
                    ãƒ»<strong>3ç‚¹:</strong> ãƒãƒ¼ãŒå‚ç›´ã€å¾Œã‚ã®è†ãŒå‰ã®ã‹ã‹ã¨ã«è§¦ã‚Œã‚‹ã€è¶³ãŒä¸€ç›´ç·šä¸Š<br>
                    ãƒ»<strong>2ç‚¹:</strong> ãƒ©ãƒ³ã‚¸ã‚’å®Œäº†ã§ãã‚‹ãŒã€ã‚¢ãƒ©ã‚¤ãƒ¡ãƒ³ãƒˆãŒä¸å®Œå…¨<br>
                    ãƒ»<strong>1ç‚¹:</strong> å‹•ä½œã‚’å®Œäº†ã§ããªã„ã€ã¾ãŸã¯ãƒãƒ©ãƒ³ã‚¹ã‚’å¤±ã†<br>
                    ãƒ»<strong>0ç‚¹:</strong> å‹•ä½œä¸­ã«ç—›ã¿ãŒã‚ã‚‹</p>
                </div>
            </div>
            </div>
            <div class="form-row" style="margin-top: 25px;">
                <div class="form-group">
                    <label>Deep Squat Score (0-3)<span class="label-ja">ãƒ‡ã‚£ãƒ¼ãƒ—ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ</span></label>
                    <select id="deepSquat">
                        <option value="">é¸æŠ</option>
                        <option value="0">0ç‚¹</option>
                        <option value="1">1ç‚¹</option>
                        <option value="2">2ç‚¹</option>
                        <option value="3">3ç‚¹</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Inline Lunge Score (0-3)<span class="label-ja">ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒ©ãƒ³ã‚¸</span></label>
                    <select id="inlineLunge">
                        <option value="">é¸æŠ</option>
                        <option value="0">0ç‚¹</option>
                        <option value="1">1ç‚¹</option>
                        <option value="2">2ç‚¹</option>
                        <option value="3">3ç‚¹</option>
                    </select>
                </div>
            </div>

            <h3 style="margin: 40px 0 25px 0;">Subjective Scales<span style="font-size: 9px; display: block; margin-top: 3px; color: #999999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ä¸»è¦³çš„è©•ä¾¡ã‚¹ã‚±ãƒ¼ãƒ«</span></h3>
            <div class="test-info">
                <div class="test-info-content" style="width: 100%;">
                    <p class="test-info-description">ã‚¢ã‚¹ãƒªãƒ¼ãƒˆè‡ªèº«ã®ä¸»è¦³çš„ãªçŠ¶æ…‹ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚0ï½10ã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§ã€ç–¼ç—›ãƒ»ç–²åŠ´ãƒ»ç¡çœ ãƒ»ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã‚’è©•ä¾¡ã€‚ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ç®¡ç†ã«æœ‰ç”¨ã§ã™ã€‚</p>
                </div>
            </div>
            
            <div class="test-info">
                <div class="test-info-header">
                    <div class="test-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3 12h18" stroke="white" stroke-width="2"/>
                            <circle cx="6" cy="12" r="2" fill="white"/>
                            <circle cx="12" cy="12" r="2" fill="white" opacity="0.6"/>
                            <circle cx="18" cy="12" r="2" fill="white" opacity="0.3"/>
                            <text x="3" y="8" font-size="4" fill="white">0</text>
                            <text x="19" y="8" font-size="4" fill="white">10</text>
                        </svg>
                    </div>
                    <div class="test-info-content">
                        <div class="test-info-title">VAS Pain (ç–¼ç—›ã‚¹ã‚±ãƒ¼ãƒ«)</div>
                        <p class="test-info-description">ç¾åœ¨ã®ç—›ã¿ã®ãƒ¬ãƒ™ãƒ«ã‚’0(ç—›ã¿ãªã—)ï½10(æœ€æ‚ªã®ç—›ã¿)ã§è©•ä¾¡ã—ã¾ã™ã€‚ç—›ã¿ã®å¤‰åŒ–ã‚’è¿½è·¡ã—ã¾ã™ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>VAS Pain (0-10): <span id="vasPainValue" style="color: #1a1a1a; font-weight: 500;">5</span><span class="label-ja">ç–¼ç—›ã‚¹ã‚±ãƒ¼ãƒ«</span></label>
                <input type="range" id="vasPain" min="0" max="10" value="5" step="1">
                <div class="vas-labels">
                    <span>0: No Pain</span>
                    <span>10: Worst Pain</span>
                </div>
            </div>
            <div class="test-info">
                <div class="test-info-header">
                    <div class="test-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="8" stroke="white" stroke-width="1.5" fill="none"/>
                            <path d="M12 6v6l4 4" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                            <circle cx="12" cy="12" r="1" fill="white"/>
                        </svg>
                    </div>
                    <div class="test-info-content">
                        <div class="test-info-title">VAS Performance (ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚¹ã‚±ãƒ¼ãƒ«)</div>
                        <p class="test-info-description">ç¾åœ¨ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çŠ¶æ…‹ã‚’0(æœ€ä½)ï½10(æœ€é«˜)ã§è©•ä¾¡ã—ã¾ã™ã€‚ç«¶æŠ€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®è‡ªå·±è©•ä¾¡ã§ã™ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>VAS Performance (0-10): <span id="vasPerformanceValue" style="color: #1a1a1a; font-weight: 500;">5</span><span class="label-ja">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚¹ã‚±ãƒ¼ãƒ«</span></label>
                <input type="range" id="vasPerformance" min="0" max="10" value="5" step="1">
                <div class="vas-labels">
                    <span>0: Worst</span>
                    <span>10: Best</span>
                </div>
            </div>
            <div class="test-info">
                <div class="test-info-header">
                    <div class="test-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 14c0-3 3-6 6-6s6 3 6 6" stroke="white" stroke-width="1.5" fill="none"/>
                            <circle cx="9" cy="10" r="1" fill="white"/>
                            <circle cx="15" cy="10" r="1" fill="white"/>
                            <path d="M8 14h8" stroke="white" stroke-width="1" opacity="0.5"/>
                        </svg>
                    </div>
                    <div class="test-info-content">
                        <div class="test-info-title">Fatigue Scale (ç–²åŠ´åº¦)</div>
                        <p class="test-info-description">å…¨èº«ã®ç–²åŠ´åº¦ã‚’0(ç–²åŠ´ãªã—)ï½10(æ¥µåº¦ã®ç–²åŠ´)ã§è©•ä¾¡ã—ã¾ã™ã€‚ã‚ªãƒ¼ãƒãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ—©æœŸç™ºè¦‹ã«å½¹ç«‹ã¡ã¾ã™ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>Fatigue (0-10): <span id="fatigueValue" style="color: #1a1a1a; font-weight: 500;">5</span><span class="label-ja">ç–²åŠ´åº¦</span></label>
                <input type="range" id="fatigue" min="0" max="10" value="5" step="1">
                <div class="vas-labels">
                    <span>0: No Fatigue</span>
                    <span>10: Extreme Fatigue</span>
                </div>
            </div>
            <div class="test-info">
                <div class="test-info-header">
                    <div class="test-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6 12c0-3 2-5 6-5s6 2 6 5v6H6v-6z" stroke="white" stroke-width="1.5" fill="none"/>
                            <circle cx="9" cy="10" r="0.8" fill="white"/>
                            <circle cx="15" cy="10" r="0.8" fill="white"/>
                            <path d="M9 14c1 1 2 1 3 1s2 0 3-1" stroke="white" stroke-width="1" fill="none" opacity="0.6"/>
                        </svg>
                    </div>
                    <div class="test-info-content">
                        <div class="test-info-title">Sleep Quality (ç¡çœ è³ª)</div>
                        <p class="test-info-description">å‰å¤œã®ç¡çœ ã®è³ªã‚’0(æœ€æ‚ª)ï½10(æœ€é«˜)ã§è©•ä¾¡ã—ã¾ã™ã€‚å›å¾©çŠ¶æ…‹ã®é‡è¦æŒ‡æ¨™ã§ã™ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>Sleep Quality (0-10): <span id="sleepQualityValue" style="color: #1a1a1a; font-weight: 500;">5</span><span class="label-ja">ç¡çœ è³ª</span></label>
                <input type="range" id="sleepQuality" min="0" max="10" value="5" step="1">
                <div class="vas-labels">
                    <span>0: Worst</span>
                    <span>10: Best</span>
                </div>
            </div>
            <div class="test-info">
                <div class="test-info-header">
                    <div class="test-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 10l4-4 4 4" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                            <path d="M8 14l4 4 4-4" stroke="white" stroke-width="1.5" fill="none" stroke-linecap="round"/>
                            <circle cx="12" cy="12" r="1.5" fill="white" opacity="0.7"/>
                        </svg>
                    </div>
                    <div class="test-info-content">
                        <div class="test-info-title">Muscle Soreness (ç­‹è‚‰ç—›)</div>
                        <p class="test-info-description">ç­‹è‚‰ç—›ã®ç¨‹åº¦ã‚’0(ç—›ã¿ãªã—)ï½10(æ¿€ç—›)ã§è©•ä¾¡ã—ã¾ã™ã€‚ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è² è·ã®é©æ­£åˆ¤æ–­ã«ä½¿ç”¨ã—ã¾ã™ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>Muscle Soreness (0-10): <span id="muscleSorenessValue" style="color: #1a1a1a; font-weight: 500;">5</span><span class="label-ja">ç­‹è‚‰ç—›</span></label>
                <input type="range" id="muscleSoreness" min="0" max="10" value="5" step="1">
                <div class="vas-labels">
                    <span>0: No Soreness</span>
                    <span>10: Severe Soreness</span>
                </div>
            </div>
            <div class="test-info">
                <div class="test-info-header">
                    <div class="test-icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <polygon points="12,5 15,10 20,11 16,15 17,20 12,17 7,20 8,15 4,11 9,10" fill="white" opacity="0.9"/>
                            <circle cx="12" cy="12" r="2" fill="#1a1a1a"/>
                        </svg>
                    </div>
                    <div class="test-info-content">
                        <div class="test-info-title">Motivation (ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³)</div>
                        <p class="test-info-description">ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã¸ã®æ„æ¬²ã‚’0(ä½ã„)ï½10(éå¸¸ã«é«˜ã„)ã§è©•ä¾¡ã—ã¾ã™ã€‚å¿ƒç†çŠ¶æ…‹ã®æŠŠæ¡ã«é‡è¦ã§ã™ã€‚</p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label>Motivation (0-10): <span id="motivationValue" style="color: #1a1a1a; font-weight: 500;">5</span><span class="label-ja">ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³</span></label>
                <input type="range" id="motivation" min="0" max="10" value="5" step="1">
                <div class="vas-labels">
                    <span>0: No Motivation</span>
                    <span>10: Highly Motivated</span>
                </div>
            </div>
            <button onclick="addMeasurement()">Save Measurement<span style="font-size: 9px; display: block; margin-top: 2px; letter-spacing: 0.5px; font-weight: 300;">æ¸¬å®šãƒ‡ãƒ¼ã‚¿ä¿å­˜</span></button>
        </div>

        <div class="divider"></div>

        <!-- å±¥æ­´ãƒ»åˆ†æ -->
        <div id="history" class="section">
            <h2>Measurement History<span style="font-size: 10px; display: block; margin-top: 5px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">æ¸¬å®šå±¥æ­´ãƒ»åˆ†æ</span></h2>
            <div style="overflow-x: auto;">
                <table>
                    <thead>
                        <tr>
                            <th>Date<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">æ¸¬å®šæ—¥</span></th>
                            <th>Subject<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">è¢«é¨“è€…</span></th>
                            <th>Single Leg<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ç‰‡è¶³ç«‹ã¡</span></th>
                            <th>VAS Pain<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ç–¼ç—›</span></th>
                            <th>VAS Perf.<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</span></th>
                        </tr>
                    </thead>
                    <tbody id="historyTableBody"></tbody>
                </table>
            </div>

            <h3 style="margin-top: 50px; margin-bottom: 25px;">Improvement Analysis<span style="font-size: 9px; display: block; margin-top: 3px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">æ”¹å–„ç‡åˆ†æ</span></h3>
            <div style="overflow-x: auto;">
                <table>
                    <thead>
                        <tr>
                            <th>Subject<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">è¢«é¨“è€…</span></th>
                            <th>Single Leg<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ç‰‡è¶³ç«‹ã¡</span></th>
                            <th>Y-Balance Ant.<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">Y-å‰æ–¹</span></th>
                            <th>Plank<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ãƒ—ãƒ©ãƒ³ã‚¯</span></th>
                            <th>VAS Pain<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ç–¼ç—›</span></th>
                            <th>VAS Perf.<span style="font-size: 8px; display: block; margin-top: 2px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</span></th>
                        </tr>
                    </thead>
                    <tbody id="analysisTableBody"></tbody>
                </table>
            </div>
        </div>

        <div class="divider"></div>

        <!-- ãƒ‡ãƒ¼ã‚¿å‡ºåŠ› -->
        <div id="export" class="section">
            <h2>Data Export<span style="font-size: 10px; display: block; margin-top: 5px; color: #999; letter-spacing: 0.5px; font-weight: 300; text-transform: none;">ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›</span></h2>
            <p style="margin-bottom: 25px; color: #666; font-size: 13px;">Export data in CSV format for external analysis.</p>
            
            <button onclick="exportCSV('subjects')" style="margin: 10px;">Subject List<span style="font-size: 9px; display: block; margin-top: 2px; letter-spacing: 0.5px; font-weight: 300;">è¢«é¨“è€…ãƒªã‚¹ãƒˆ</span></button>
            <button onclick="exportCSV('measurements')" style="margin: 10px;">Measurement Data<span style="font-size: 9px; display: block; margin-top: 2px; letter-spacing: 0.5px; font-weight: 300;">æ¸¬å®šãƒ‡ãƒ¼ã‚¿</span></button>
            <button onclick="exportCSV('integrated')" style="margin: 10px;" class="btn-secondary">Integrated Data<span style="font-size: 9px; display: block; margin-top: 2px; letter-spacing: 0.5px; font-weight: 300;">çµ±åˆãƒ‡ãƒ¼ã‚¿</span></button>
        </div>
    </div>

    <script>
        let db = null;
        let dbReady = false;

        // ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                event.target.classList.add('active');
            }
        }

        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ã«å¿œã˜ã¦ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ãƒ–ã‚’æ›´æ–°
        window.addEventListener('scroll', () => {
            const sections = ['dashboard', 'subjects', 'measurements', 'history', 'export'];
            let current = '';

            sections.forEach(sectionId => {
                const section = document.getElementById(sectionId);
                if (section) {
                    const rect = section.getBoundingClientRect();
                    if (rect.top <= 250 && rect.bottom >= 250) {
                        current = sectionId;
                    }
                }
            });

            if (current) {
                document.querySelectorAll('.nav-tab').forEach((tab, index) => {
                    tab.classList.remove('active');
                    if (sections[index] === current) {
                        tab.classList.add('active');
                    }
                });
            }
        });

        // ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º
        function showAlert(message, type = 'success') {
            const alertBox = document.getElementById('alertBox');
            alertBox.textContent = message;
            alertBox.className = `alert ${type} show`;
            setTimeout(() => {
                alertBox.classList.remove('show');
            }, 3000);
        }

        // VASã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å€¤è¡¨ç¤ºæ›´æ–°
        document.addEventListener('DOMContentLoaded', () => {
            const sliders = [
                { id: 'vasPain', valueId: 'vasPainValue' },
                { id: 'vasPerformance', valueId: 'vasPerformanceValue' },
                { id: 'fatigue', valueId: 'fatigueValue' },
                { id: 'sleepQuality', valueId: 'sleepQualityValue' },
                { id: 'muscleSoreness', valueId: 'muscleSorenessValue' },
                { id: 'motivation', valueId: 'motivationValue' }
            ];

            sliders.forEach(slider => {
                const element = document.getElementById(slider.id);
                const valueElement = document.getElementById(slider.valueId);
                if (element && valueElement) {
                    element.addEventListener('input', (e) => {
                        valueElement.textContent = e.target.value;
                    });
                }
            });
        });

        // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
        function initDB() {
            console.log('ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–é–‹å§‹');
            
            const request = indexedDB.open('phase1TrialDB', 3);

            request.onerror = () => {
                console.error('DBåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼');
                showAlert('Database initialization failed. Please try a different browser.', 'error');
            };

            request.onupgradeneeded = (e) => {
                console.log('DBæ§‹é€ ä½œæˆä¸­');
                db = e.target.result;

                if (!db.objectStoreNames.contains('subjects')) {
                    db.createObjectStore('subjects', { keyPath: 'id' });
                }

                if (!db.objectStoreNames.contains('measurements')) {
                    const measurementStore = db.createObjectStore('measurements', { keyPath: 'id', autoIncrement: true });
                    measurementStore.createIndex('subjectId', 'subjectId', { unique: false });
                }
            };

            request.onsuccess = (e) => {
                db = e.target.result;
                dbReady = true;
                console.log('DBåˆæœŸåŒ–å®Œäº†');
                loadDashboard();
                loadSubjects();
                loadHistory();
                calculateAnalysis();
            };
        }

        // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ›´æ–°
        function loadDashboard() {
            if (!dbReady) return;

            const tx = db.transaction(['subjects', 'measurements'], 'readonly');
            
            tx.objectStore('subjects').count().onsuccess = (e) => {
                document.getElementById('totalSubjects').textContent = e.target.result;
            };

            tx.objectStore('measurements').count().onsuccess = (e) => {
                document.getElementById('totalMeasurements').textContent = e.target.result;
            };
        }

        // è¢«é¨“è€…è¿½åŠ 
        function addSubject() {
            const id = document.getElementById('subjectId').value.trim();
            const name = document.getElementById('subjectName').value.trim();

            if (!id || !name) {
                showAlert('Subject ID and Name are required.', 'error');
                return;
            }

            const subject = {
                id,
                name,
                birthDate: document.getElementById('birthDate').value,
                gender: document.getElementById('gender').value,
                sport: document.getElementById('sport').value,
                dominantHand: document.getElementById('dominantHand').value,
                dominantFoot: document.getElementById('dominantFoot').value,
                sportsHistory: document.getElementById('sportsHistory').value,
                injuryHistory: document.getElementById('injuryHistory').value,
                surgeryHistory: document.getElementById('surgeryHistory').value,
                physicalIssues: document.getElementById('physicalIssues').value,
                improvementGoals: document.getElementById('improvementGoals').value,
                registeredAt: new Date().toISOString()
            };

            const tx = db.transaction(['subjects'], 'readwrite');
            const request = tx.objectStore('subjects').add(subject);

            request.onsuccess = () => {
                showAlert('Subject registered successfully.');
                clearSubjectForm();
                loadSubjects();
                loadDashboard();
            };

            request.onerror = () => {
                showAlert('Registration failed (ID may already exist).', 'error');
            };
        }

        function clearSubjectForm() {
            document.getElementById('subjectId').value = '';
            document.getElementById('subjectName').value = '';
            document.getElementById('birthDate').value = '';
            document.getElementById('gender').value = '';
            document.getElementById('sport').value = '';
            document.getElementById('dominantHand').value = '';
            document.getElementById('dominantFoot').value = '';
            document.getElementById('sportsHistory').value = '';
            document.getElementById('injuryHistory').value = '';
            document.getElementById('surgeryHistory').value = '';
            document.getElementById('physicalIssues').value = '';
            document.getElementById('improvementGoals').value = '';
        }

        // è¢«é¨“è€…å‰Šé™¤
        function deleteSubject(subjectId) {
            if (!confirm(`è¢«é¨“è€… ${subjectId} ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\n\næ³¨æ„: ã“ã®è¢«é¨“è€…ã«ç´ã¥ãæ¸¬å®šãƒ‡ãƒ¼ã‚¿ã‚‚å…¨ã¦å‰Šé™¤ã•ã‚Œã¾ã™ã€‚`)) {
                return;
            }

            const tx = db.transaction(['subjects', 'measurements'], 'readwrite');
            
            // è¢«é¨“è€…ã‚’å‰Šé™¤
            tx.objectStore('subjects').delete(subjectId);
            
            // é–¢é€£ã™ã‚‹æ¸¬å®šãƒ‡ãƒ¼ã‚¿ã‚‚å‰Šé™¤
            const measurementStore = tx.objectStore('measurements');
            const index = measurementStore.index('subjectId');
            const range = IDBKeyRange.only(subjectId);
            
            index.openCursor(range).onsuccess = (e) => {
                const cursor = e.target.result;
                if (cursor) {
                    cursor.delete();
                    cursor.continue();
                }
            };

            tx.oncomplete = () => {
                showAlert(`è¢«é¨“è€… ${subjectId} ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚`);
                loadSubjects();
                loadDashboard();
                loadHistory();
                calculateAnalysis();
            };

            tx.onerror = () => {
                showAlert('å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'error');
            };
        }

        // è¢«é¨“è€…ä¸€è¦§èª­è¾¼
        function loadSubjects() {
            if (!dbReady) return;

            const tbody = document.getElementById('subjectsTableBody');
            const select = document.getElementById('measurementSubjectId');
            tbody.innerHTML = '';
            select.innerHTML = '<option value="">é¸æŠã—ã¦ãã ã•ã„</option>';

            const tx = db.transaction(['subjects'], 'readonly');
            tx.objectStore('subjects').openCursor().onsuccess = (e) => {
                const cursor = e.target.result;
                if (cursor) {
                    const s = cursor.value;
                    const shortIssues = s.physicalIssues ? (s.physicalIssues.length > 50 ? s.physicalIssues.substring(0, 50) + '...' : s.physicalIssues) : 'â€”';
                    
                    tbody.innerHTML += `
                        <tr>
                            <td>${s.id}</td>
                            <td>${s.name}</td>
                            <td>${s.gender || 'â€”'}</td>
                            <td>${s.sport || 'â€”'}</td>
                            <td>${s.dominantHand || 'â€”'}</td>
                            <td>${s.dominantFoot || 'â€”'}</td>
                            <td title="${s.physicalIssues || ''}">${shortIssues}</td>
                            <td><button class="btn-delete" onclick="deleteSubject('${s.id}')">Delete</button></td>
                        </tr>
                    `;
                    select.innerHTML += `<option value="${s.id}">${s.id} â€” ${s.name}</option>`;
                    cursor.continue();
                }
            };
        }

        // æ¸¬å®šãƒ‡ãƒ¼ã‚¿è¿½åŠ 
        function addMeasurement() {
            const subjectId = document.getElementById('measurementSubjectId').value;
            const date = document.getElementById('measurementDate').value;

            if (!subjectId || !date) {
                showAlert('Subject ID and Date are required.', 'error');
                return;
            }

            const measurement = {
                subjectId,
                date,
                // æ—¢å­˜ã®é …ç›®
                singleLegStand: parseFloat(document.getElementById('singleLegStand').value) || null,
                yBalanceAnt: parseFloat(document.getElementById('yBalanceAnt').value) || null,
                yBalancePostLat: parseFloat(document.getElementById('yBalancePostLat').value) || null,
                yBalancePostMed: parseFloat(document.getElementById('yBalancePostMed').value) || null,
                plankTime: parseFloat(document.getElementById('plankTime').value) || null,
                // ãƒãƒ©ãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
                tandemStance: parseFloat(document.getElementById('tandemStance').value) || null,
                rombergTest: parseFloat(document.getElementById('rombergTest').value) || null,
                starExcursion: parseFloat(document.getElementById('starExcursion').value) || null,
                // ä½“å¹¹ãƒ»ç­‹åŠ›
                sidePlankLeft: parseFloat(document.getElementById('sidePlankLeft').value) || null,
                sidePlankRight: parseFloat(document.getElementById('sidePlankRight').value) || null,
                singleSquatLeft: parseInt(document.getElementById('singleSquatLeft').value) || null,
                singleSquatRight: parseInt(document.getElementById('singleSquatRight').value) || null,
                pushups: parseInt(document.getElementById('pushups').value) || null,
                // æŸ”è»Ÿæ€§
                sitReach: parseFloat(document.getElementById('sitReach').value) || null,
                shoulderFlexLeft: document.getElementById('shoulderFlexLeft').value || null,
                shoulderFlexRight: document.getElementById('shoulderFlexRight').value || null,
                ankleDorsiLeft: parseFloat(document.getElementById('ankleDorsiLeft').value) || null,
                ankleDorsiRight: parseFloat(document.getElementById('ankleDorsiRight').value) || null,
                // ãƒ‘ãƒ¯ãƒ¼ãƒ»æ•æ·æ€§
                verticalJump: parseFloat(document.getElementById('verticalJump').value) || null,
                singleHopLeft: parseFloat(document.getElementById('singleHopLeft').value) || null,
                singleHopRight: parseFloat(document.getElementById('singleHopRight').value) || null,
                stepDown: parseInt(document.getElementById('stepDown').value) || null,
                // æ©Ÿèƒ½çš„å‹•ä½œ
                deepSquat: document.getElementById('deepSquat').value || null,
                
                inlineLunge: document.getElementById('inlineLunge').value || null,
                // ä¸»è¦³çš„è©•ä¾¡
                vasPain: parseInt(document.getElementById('vasPain').value),
                vasPerformance: parseInt(document.getElementById('vasPerformance').value),
                fatigue: parseInt(document.getElementById('fatigue').value),
                sleepQuality: parseInt(document.getElementById('sleepQuality').value),
                muscleSoreness: parseInt(document.getElementById('muscleSoreness').value),
                motivation: parseInt(document.getElementById('motivation').value),
                timestamp: new Date().toISOString()
            };

            const tx = db.transaction(['measurements'], 'readwrite');
            const request = tx.objectStore('measurements').add(measurement);
            
            request.onsuccess = () => {
                console.log('æ¸¬å®šãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã¾ã—ãŸ');
            };
            
            request.onerror = (e) => {
                console.error('ä¿å­˜ã‚¨ãƒ©ãƒ¼:', e.target.error);
                showAlert('Failed to save measurement.', 'error');
            };
            
            tx.oncomplete = () => {
                console.log('ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å®Œäº† - ãƒ‡ãƒ¼ã‚¿æ›´æ–°ä¸­');
                showAlert('Measurement saved successfully.');
                clearMeasurementForm();
                loadDashboard();
                loadHistory();
                calculateAnalysis();
                scrollToSection('dashboard');
            };
            
            tx.onerror = (e) => {
                console.error('ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼:', e.target.error);
                showAlert('Transaction failed.', 'error');
            };
        }

        function clearMeasurementForm() {
            document.getElementById('measurementDate').value = '';
            // æ—¢å­˜ã®é …ç›®
            document.getElementById('singleLegStand').value = '';
            document.getElementById('yBalanceAnt').value = '';
            document.getElementById('yBalancePostLat').value = '';
            document.getElementById('yBalancePostMed').value = '';
            document.getElementById('plankTime').value = '';
            // ãƒãƒ©ãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
            document.getElementById('tandemStance').value = '';
            document.getElementById('rombergTest').value = '';
            document.getElementById('starExcursion').value = '';
            // ä½“å¹¹ãƒ»ç­‹åŠ›
            document.getElementById('sidePlankLeft').value = '';
            document.getElementById('sidePlankRight').value = '';
            document.getElementById('singleSquatLeft').value = '';
            document.getElementById('singleSquatRight').value = '';
            document.getElementById('pushups').value = '';
            // æŸ”è»Ÿæ€§
            document.getElementById('sitReach').value = '';
            document.getElementById('shoulderFlexLeft').value = '';
            document.getElementById('shoulderFlexRight').value = '';
            document.getElementById('ankleDorsiLeft').value = '';
            document.getElementById('ankleDorsiRight').value = '';
            // ãƒ‘ãƒ¯ãƒ¼ãƒ»æ•æ·æ€§
            document.getElementById('verticalJump').value = '';
            document.getElementById('singleHopLeft').value = '';
            document.getElementById('singleHopRight').value = '';
            document.getElementById('stepDown').value = '';
            // æ©Ÿèƒ½çš„å‹•ä½œ
            document.getElementById('deepSquat').value = '';
            
            document.getElementById('inlineLunge').value = '';
            // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ãƒªã‚»ãƒƒãƒˆ
            const sliders = ['vasPain', 'vasPerformance', 'fatigue', 'sleepQuality', 'muscleSoreness', 'motivation'];
            sliders.forEach(id => {
                document.getElementById(id).value = '5';
                document.getElementById(id + 'Value').textContent = '5';
            });
        }

        // å±¥æ­´è¡¨ç¤º
        function loadHistory() {
            if (!dbReady) return;

            const tbody = document.getElementById('historyTableBody');
            tbody.innerHTML = '';

            const tx = db.transaction(['measurements', 'subjects'], 'readonly');
            const measurements = [];

            tx.objectStore('measurements').openCursor().onsuccess = (e) => {
                const cursor = e.target.result;
                if (cursor) {
                    measurements.push(cursor.value);
                    cursor.continue();
                } else {
                    measurements.sort((a, b) => new Date(b.date) - new Date(a.date));
                    measurements.forEach(m => {
                        tx.objectStore('subjects').get(m.subjectId).onsuccess = (e2) => {
                            const subject = e2.target.result;
                            tbody.innerHTML += `
                                <tr>
                                    <td>${m.date}</td>
                                    <td>${subject ? subject.name : 'â€”'}</td>
                                    <td>${m.singleLegStand !== null ? m.singleLegStand.toFixed(1) : 'â€”'}</td>
                                    <td>${m.vasPain !== null ? m.vasPain : 'â€”'}</td>
                                    <td>${m.vasPerformance !== null ? m.vasPerformance : 'â€”'}</td>
                                </tr>
                            `;
                        };
                    });
                }
            };
        }

        // æ”¹å–„ç‡è¨ˆç®—
        function calculateAnalysis() {
            if (!dbReady) return;

            const tbody = document.getElementById('analysisTableBody');
            tbody.innerHTML = '';

            const tx = db.transaction(['measurements', 'subjects'], 'readonly');
            const subjectData = {};

            tx.objectStore('measurements').openCursor().onsuccess = (e) => {
                const cursor = e.target.result;
                if (cursor) {
                    const m = cursor.value;
                    if (!subjectData[m.subjectId]) subjectData[m.subjectId] = [];
                    subjectData[m.subjectId].push(m);
                    cursor.continue();
                } else {
                    for (const sid in subjectData) {
                        const data = subjectData[sid].sort((a, b) => new Date(a.date) - new Date(b.date));
                        if (data.length < 2) continue;

                        const first = data[0];
                        const last = data[data.length - 1];

                        const calcRate = (f, l) => {
                            if (f === null || l === null || f === 0) return null;
                            return ((l - f) / f * 100).toFixed(1);
                        };

                        const formatRate = (r) => {
                            if (r === null) return 'â€”';
                            const val = parseFloat(r);
                            const cls = val >= 0 ? 'success' : 'error';
                            return `<span class="${cls}">${val >= 0 ? '+' : ''}${r}%</span>`;
                        };

                        tx.objectStore('subjects').get(sid).onsuccess = (e2) => {
                            const subject = e2.target.result;
                            tbody.innerHTML += `
                                <tr>
                                    <td>${subject ? subject.name : 'â€”'}</td>
                                    <td>${formatRate(calcRate(first.singleLegStand, last.singleLegStand))}</td>
                                    <td>${formatRate(calcRate(first.yBalanceAnt, last.yBalanceAnt))}</td>
                                    <td>${formatRate(calcRate(first.plankTime, last.plankTime))}</td>
                                    <td>${formatRate(calcRate(first.vasPain, last.vasPain))}</td>
                                    <td>${formatRate(calcRate(first.vasPerformance, last.vasPerformance))}</td>
                                </tr>
                            `;
                        };
                    }
                }
            };
        }

        // CSVå‡ºåŠ›
        function exportCSV(type) {
            if (!dbReady) return;

            const tx = db.transaction(['measurements', 'subjects'], 'readonly');
            let csvContent = '';

            if (type === 'subjects') {
                csvContent = 'ID,Name,DOB,Gender,Sport,Dominant Hand,Dominant Foot,Sports History,Injury History,Surgery History,Physical Issues,Improvement Goals,Registered At\n';
                tx.objectStore('subjects').openCursor().onsuccess = (e) => {
                    const cursor = e.target.result;
                    if (cursor) {
                        const s = cursor.value;
                        const row = [
                            s.id,
                            s.name,
                            s.birthDate || '',
                            s.gender || '',
                            s.sport || '',
                            s.dominantHand || '',
                            s.dominantFoot || '',
                            `"${(s.sportsHistory || '').replace(/"/g, '""')}"`,
                            `"${(s.injuryHistory || '').replace(/"/g, '""')}"`,
                            `"${(s.surgeryHistory || '').replace(/"/g, '""')}"`,
                            `"${(s.physicalIssues || '').replace(/"/g, '""')}"`,
                            `"${(s.improvementGoals || '').replace(/"/g, '""')}"`,
                            s.registeredAt
                        ].join(',');
                        csvContent += row + '\n';
                        cursor.continue();
                    } else {
                        downloadCSV(csvContent, 'subjects.csv');
                    }
                };
            } else if (type === 'measurements') {
                csvContent = 'Subject ID,Date,Single Leg Stand,Y-Balance Ant,Y-Balance Post-Lat,Y-Balance Post-Med,Plank,Tandem Stance,Romberg,Star Excursion,Side Plank L,Side Plank R,Single Squat L,Single Squat R,Pushups,Sit Reach,Shoulder Flex L,Shoulder Flex R,Ankle Dorsi L,Ankle Dorsi R,Vertical Jump,Single Hop L,Single Hop R,Step Down,Deep Squat,Hurdle Step,Inline Lunge,VAS Pain,VAS Performance,Fatigue,Sleep Quality,Muscle Soreness,Motivation\n';
                tx.objectStore('measurements').openCursor().onsuccess = (e) => {
                    const cursor = e.target.result;
                    if (cursor) {
                        const m = cursor.value;
                        csvContent += `${m.subjectId},${m.date},${m.singleLegStand || ''},${m.yBalanceAnt || ''},${m.yBalancePostLat || ''},${m.yBalancePostMed || ''},${m.plankTime || ''},${m.tandemStance || ''},${m.rombergTest || ''},${m.starExcursion || ''},${m.sidePlankLeft || ''},${m.sidePlankRight || ''},${m.singleSquatLeft || ''},${m.singleSquatRight || ''},${m.pushups || ''},${m.sitReach || ''},${m.shoulderFlexLeft || ''},${m.shoulderFlexRight || ''},${m.ankleDorsiLeft || ''},${m.ankleDorsiRight || ''},${m.verticalJump || ''},${m.singleHopLeft || ''},${m.singleHopRight || ''},${m.stepDown || ''},${m.deepSquat || ''},${m.hurdleStep || ''},${m.inlineLunge || ''},${m.vasPain || ''},${m.vasPerformance || ''},${m.fatigue || ''},${m.sleepQuality || ''},${m.muscleSoreness || ''},${m.motivation || ''}\n`;
                        cursor.continue();
                    } else {
                        downloadCSV(csvContent, 'measurements.csv');
                    }
                };
            } else if (type === 'integrated') {
                csvContent = 'Subject ID,Name,Gender,Sport,Dominant Hand,Dominant Foot,Measurement Date,Single Leg Stand,Y-Balance Ant,Y-Balance Post-Lat,Y-Balance Post-Med,Plank,Tandem Stance,Romberg,Star Excursion,Side Plank L,Side Plank R,Single Squat L,Single Squat R,Pushups,Sit Reach,Shoulder Flex L,Shoulder Flex R,Ankle Dorsi L,Ankle Dorsi R,Vertical Jump,Single Hop L,Single Hop R,Step Down,Deep Squat,Hurdle Step,Inline Lunge,VAS Pain,VAS Performance,Fatigue,Sleep Quality,Muscle Soreness,Motivation,Sports History,Physical Issues,Goals\n';
                const subjectMap = {};
                
                tx.objectStore('subjects').openCursor().onsuccess = (e) => {
                    const cursor = e.target.result;
                    if (cursor) {
                        subjectMap[cursor.value.id] = cursor.value;
                        cursor.continue();
                    } else {
                        tx.objectStore('measurements').openCursor().onsuccess = (e2) => {
                            const cursor2 = e2.target.result;
                            if (cursor2) {
                                const m = cursor2.value;
                                const subject = subjectMap[m.subjectId];
                                const row = [
                                    m.subjectId,
                                    subject ? subject.name : 'â€”',
                                    subject?.gender || '',
                                    subject?.sport || '',
                                    subject?.dominantHand || '',
                                    subject?.dominantFoot || '',
                                    m.date,
                                    m.singleLegStand || '',
                                    m.yBalanceAnt || '',
                                    m.yBalancePostLat || '',
                                    m.yBalancePostMed || '',
                                    m.plankTime || '',
                                    m.tandemStance || '',
                                    m.rombergTest || '',
                                    m.starExcursion || '',
                                    m.sidePlankLeft || '',
                                    m.sidePlankRight || '',
                                    m.singleSquatLeft || '',
                                    m.singleSquatRight || '',
                                    m.pushups || '',
                                    m.sitReach || '',
                                    m.shoulderFlexLeft || '',
                                    m.shoulderFlexRight || '',
                                    m.ankleDorsiLeft || '',
                                    m.ankleDorsiRight || '',
                                    m.verticalJump || '',
                                    m.singleHopLeft || '',
                                    m.singleHopRight || '',
                                    m.stepDown || '',
                                    m.deepSquat || '',
                                    m.hurdleStep || '',
                                    m.inlineLunge || '',
                                    m.vasPain || '',
                                    m.vasPerformance || '',
                                    m.fatigue || '',
                                    m.sleepQuality || '',
                                    m.muscleSoreness || '',
                                    m.motivation || '',
                                    `"${(subject?.sportsHistory || '').replace(/"/g, '""')}"`,
                                    `"${(subject?.physicalIssues || '').replace(/"/g, '""')}"`,
                                    `"${(subject?.improvementGoals || '').replace(/"/g, '""')}"`
                                ].join(',');
                                csvContent += row + '\n';
                                cursor2.continue();
                            } else {
                                downloadCSV(csvContent, 'integrated_data.csv');
                            }
                        };
                    }
                };
            }
        }

        function downloadCSV(content, filename) {
            const bom = new Uint8Array([0xEF, 0xBB, 0xBF]);
            const blob = new Blob([bom, content], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            link.click();
        }

        // åˆæœŸåŒ–å®Ÿè¡Œ
        window.addEventListener('DOMContentLoaded', () => {
            if (!window.indexedDB) {
                showAlert('This browser does not support IndexedDB.', 'error');
                return;
            }
            console.log('ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†ã€DBåˆæœŸåŒ–é–‹å§‹');
            initDB();
        });

        function toggleDetail(detailId) {
            const detail = document.getElementById(detailId);
            const toggle = event.currentTarget;
            
            detail.classList.toggle('active');
            toggle.classList.toggle('active');
            
            if (detail.classList.contains('active')) {
                toggle.querySelector('.toggle-text').textContent = 'è©³ç´°ã‚’é–‰ã˜ã‚‹';
            } else {
                toggle.querySelector('.toggle-text').textContent = 'è©³ç´°ã‚’è¦‹ã‚‹';
            }
        }
    </script>
</body>
</html>
